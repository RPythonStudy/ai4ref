.PHONY: all init collections esearch filter efetch paper-collection download zotero analyze

# OS에 따라 파이썬 실행 경로 설정
ifeq ($(OS),Windows_NT)
    PYTHON := .venv\Scripts\python.exe
else
    PYTHON := .venv/bin/python
endif

all: init collections esearch filter efetch paper-collection download zotero

init:
	$(PYTHON) src/database/utils/initialize_database.py

collections:
	$(PYTHON) src/collector/load_collections.py

esearch:
	$(PYTHON) src/collector/pubmed_esearch.py

filter:
	$(PYTHON) src/collector/pmid_filter.py

efetch:
	$(PYTHON) src/collector/pubmed_efetch.py

paper-collection:
	$(PYTHON) src/collector/create_paper_collection.py

download:
	$(PYTHON) src/collector/pmc_downloader.py

zotero:
	$(PYTHON) src/collector/zotero_webapi.py

analyze:
	$(PYTHON) src/database/utils/analyze_database.py all
